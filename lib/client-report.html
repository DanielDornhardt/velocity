<head>
    <style>
        /* TODO: Make widget positions configurable */
        #meteor-test-runner-status-widget {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 20px;
            height: 20px;
            border-radius: 10px;
            z-index: 2147483647;
        }
        #meteor-test-runner-overlay {
            background: rgba(255, 255, 255, 1);
            color: black;
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 12px;
            z-index: 2147483647;
        }
        #meteor-test-runner-overlay table {
            border-collapse: separate;
            border-spacing: 5px;
        }
        #meteor-test-runner-overlay th,
        #meteor-test-runner-overlay td {
            background: rgba(0, 0, 0, .1);
            text-align: left;
            padding: 2px;
        }
        .pending {
            background: rgba(0, 0, 0, .2);
        }
        .pass {
            background: rgba(0, 192, 0, .5);
        }
        .fail {
            background: rgba(255, 0, 0, .5);
        }
    </style>
</head>
<body>
{{> meteorTestRunner}}
</body>

<template name="meteorTestRunner">

    <div id="meteor-test-runner-overlay" style="display: {{overlayVisibility}}">
        <h1>Test Files</h1>
        {{> meteorTestRunnerTestFiles}}
        <h1>Test Reports</h1>
        {{> meteorTestRunnerTestReports}}
        <h1>Aggregate Reports</h1>
        {{> meteorTestRunnerAggregateReports}}
    </div>

    <a id="meteor-test-runner-status-widget" class="{{aggregateResult.result}}" href="javascript:void(0);"></a>

</template>

<template name="meteorTestRunnerTestFiles">
    <table>
        <tr>
            <th>File</th>
            <th>Target Framework</th>
            <th>Last Modified</th>
        </tr>
        {{#each testFiles}}
        {{> meteorTestRunnerTestFile}}
        {{/each}}
    </table>
</template>

<template name="meteorTestRunnerTestFile">
    <tr class="{{result}}">
        <td>{{relativePath}}</td>
        <td>{{targetFramework}}</td>
        <td>{{lastModified}}</td>
    </tr>
</template>

<template name="meteorTestRunnerTestReports">
    <table>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Framework</th>
            <th>Result</th>
            <th>Ancestors</th>
            <th>Timestamp</th>
            <th>Time</th>
            <th>Async</th>
            <th>TimeOut</th>
            <th>Pending</th>
            <th>ErrorMessage</th>
        </tr>
        {{#each testReports}}
        {{> meteorTestRunnerTestReport}}
        {{/each}}
    </table>
</template>

<template name="meteorTestRunnerTestReport">
    <tr class="{{result}}">
        <td>{{_id}}</td>
        <td>{{name}}</td>
        <td>{{framework}}</td>
        <td>{{result}}</td>
        <td>{{ancestors}}</td>
        <td>{{timestamp}}</td>
        <td>{{time}}</td>
        <td>{{async}}</td>
        <td>{{timeOut}}</td>
        <td>{{pending}}</td>
        <td>{{errorMessage}}</td>
    </tr>
</template>

<template name="meteorTestRunnerAggregateReports">
    <table>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Result</th>
        </tr>
        {{#each aggregateReports}}
        {{> meteorTestRunnerAggregateReport}}
        {{/each}}
    </table>
</template>

<template name="meteorTestRunnerAggregateReport">
    <tr class="{{result}}">
        <td>{{_id}}</td>
        <td>{{name}}</td>
        <td>{{result}}</td>
    </tr>
</template>
