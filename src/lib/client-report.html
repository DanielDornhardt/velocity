<head>
    <style>
        /* TODO: Make widget positions configurable */
        #velocity-status-widget {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 20px;
            height: 20px;
            border-radius: 10px;
            z-index: 2147483647;
        }
        #velocity-overlay {
            background: rgba(255, 255, 255, 1);
            color: black;
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 12px;
            z-index: 2147483647;
        }
        #velocity-overlay table {
            border-collapse: separate;
            border-spacing: 5px;
        }
        #velocity-overlay th,
        #velocity-overlay td {
            background: rgba(0, 0, 0, .1);
            text-align: left;
            padding: 2px;
        }
        .pending {
            background: rgba(0, 0, 0, .2);
        }
        .passed {
            background: rgba(0, 192, 0, .5);
        }
        .failed {
            background: rgba(255, 0, 0, .5);
        }
    </style>
</head>
<body>
{{> velocity}}
</body>

<template name="velocity">

    <div id="velocity-overlay" style="display: {{overlayVisibility}}">
        <h1>Test Files</h1>
        {{> velocityTestFiles}}
        <h1>Aggregate Reports</h1>
        {{> velocityAggregateReports}}
        <h1>Test Reports</h1>
        {{> velocityTestReports}}
    </div>

    <a id="velocity-status-widget" class="{{aggregateResult.result}}" href="javascript:void(0);"></a>

</template>

<template name="velocityTestFiles">
    <table>
        <tr>
            <th>ID</th>
            <th>Relative Path</th>
            <th>Target Framework</th>
            <th>Last Modified</th>
        </tr>
        {{#each testFiles}}
        {{> velocityTestFile}}
        {{/each}}
    </table>
</template>

<template name="velocityTestFile">
    <tr class="{{result}}">
        <td>{{_id}}</td>
        <td>{{relativePath}}</td>
        <td>{{targetFramework}}</td>
        <td>{{lastModified}}</td>
    </tr>
</template>

<template name="velocityTestReports">
    <table>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Framework</th>
            <th>Result</th>
            <th>Ancestors</th>
            <th>Timestamp</th>
            <th>Time</th>
            <th>Async</th>
            <th>TimeOut</th>
            <th>Pending</th>
            <th>FailureType</th>
            <th>FailureMessage</th>
        </tr>
        {{#each testReports}}
        {{> velocityTestReport}}
        {{/each}}
    </table>
</template>

<template name="velocityTestReport">
    <tr class="{{result}}">
        <td>{{_id}}</td>
        <td>{{name}}</td>
        <td>{{framework}}</td>
        <td>{{result}}</td>
        <td>{{ancestors}}</td>
        <td>{{timestamp}}</td>
        <td>{{time}}</td>
        <td>{{async}}</td>
        <td>{{timeOut}}</td>
        <td>{{pending}}</td>
        <td>{{failureType}}</td>
        <td>{{failureMessage}}</td>
    </tr>
</template>

<template name="velocityAggregateReports">
    <table>
        <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Result</th>
        </tr>
        {{#each aggregateReports}}
        {{> velocityAggregateReport}}
        {{/each}}
    </table>
</template>

<template name="velocityAggregateReport">
    <tr class="{{result}}">
        <td>{{_id}}</td>
        <td>{{name}}</td>
        <td>{{result}}</td>
    </tr>
</template>
